<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Biggest Spreadsheet</title>
<style>
:root{
  --bg:#0b0f1a;
  --card:#111;
  --white:#fff;
  --purple:#a855f7;
  --blue:#3b82f6;
}
*{box-sizing:border-box;margin:0;padding:0;font-family:Arial,sans-serif;}
body{background:var(--bg);color:var(--white);overflow-x:hidden;position:relative;}

/* Mouse Glow */
#mouse-glow{
  position:fixed;width:300px;height:300px;
  background:radial-gradient(circle, rgba(59,130,246,.35), transparent 70%);
  pointer-events:none;transform:translate(-50%,-50%);z-index:0;
}

/* Banner */
.banner{width:100%;overflow:hidden;background:linear-gradient(90deg,#4f46e5,#9333ea);white-space:nowrap;}
.banner-track{display:inline-block;padding-left:100%;animation:bannerMove 18s linear infinite;}
.banner a{color:#fff;text-decoration:none;font-weight:bold;}
@keyframes bannerMove{0%{transform:translateX(0);}100%{transform:translateX(-100%);}}

/* Header */
header{display:flex;justify-content:space-between;align-items:center;padding:15px 20px;background:#000;position:sticky;top:0;z-index:10;}
.menu-btn{font-size:26px;cursor:pointer;}
.title{font-size:22px;font-weight:bold;cursor:pointer;}
.header-right{display:flex;align-items:center;gap:8px;}
.header-right img{height:32px;border-radius:50%;}

/* Sidebar */
.sidebar{position:fixed;left:-260px;top:0;width:260px;height:100%;background:#111;padding:20px;transition:.3s;z-index:20;}
.sidebar.active{left:0;}
.sidebar .close{font-size:22px;cursor:pointer;margin-bottom:20px;}
.sidebar a{display:block;color:#fff;text-decoration:none;font-size:18px;margin:10px 0;cursor:pointer;}

/* Search */
.search{padding:20px;text-align:center;}
.search input{width:90%;max-width:400px;padding:10px;border-radius:8px;border:none;}

/* Titles */
h2{padding:0 20px 10px;}

/* Products */
.products{padding:20px;gap:20px;justify-content:center;display:flex;flex-wrap:wrap;}
.products.horizontal{display:flex;overflow-x:auto;scroll-snap-type:x mandatory;}
.products.horizontal .product{scroll-snap-align:center;}
.products.grid{display:grid;gap:20px;}

/* Responsive grid */
@media(max-width:768px){.products.grid{grid-template-columns:repeat(2,1fr);}}
@media(min-width:769px){.products.grid{grid-template-columns:repeat(4,1fr);}}

/* Product card */
.product{
  background:var(--card);border-radius:14px;padding:15px;display:flex;flex-direction:column;align-items:center;
  transition:.3s;position:relative;width:260px;
}
.product:hover{transform:translateY(-8px);box-shadow:0 0 25px rgba(59,130,246,.8);}
.product img{width:100%;height:200px;object-fit:contain;background:#000;border-radius:10px;}
.product h3{margin:10px 0;text-align:center;min-height:44px;}
.product .price{margin-bottom:10px;color:#ccc;min-height:24px;}
.buy-btn{margin-top:auto;width:100%;text-align:center;padding:10px;border-radius:10px;background:linear-gradient(90deg,#4f46e5,#9333ea);color:#fff;text-decoration:none;font-weight:bold;}

/* NEW Ribbon */
.new-ribbon{
  position:absolute;top:10px;right:10px;
  background:red;color:#fff;font-size:12px;font-weight:bold;padding:3px 7px;
  border-radius:5px;
}

/* Load more */
.load-more{text-align:center;color:var(--purple);font-size:20px;cursor:pointer;margin:30px;display:none;}
</style>
</head>
<body>
<div id="mouse-glow"></div>

<div class="banner">
  <div class="banner-track">
    <a href="https://www.acbuy.com/signup" target="_blank">
      Sign up to ACBuy & get $510 coupon • Sign up to ACBuy & get $510 coupon •
    </a>
  </div>
</div>

<header>
  <div class="menu-btn" onclick="openMenu()">☰</div>
  <div class="title" onclick="goHome()">Biggest Spreadsheet</div>
  <div class="header-right">
    <img src="https://image2url.com/r2/bucket1/images/1766618106451-0c81d26c-b893-4839-bc66-6642677b99d6.jpg">
    <span>X</span>
    <img src="https://image2url.com/r2/bucket1/images/1766618736532-eaf2466a-02d4-42f9-974e-09096fe25b67.jpg">
  </div>
</header>

<div class="sidebar" id="sidebar">
  <div class="close" onclick="closeMenu()">✖</div>
  <a onclick="goHome()">Startseite</a>
  <a onclick="showCategory('Schuhe')">Schuhe</a>
  <a onclick="showCategory('Jacke')">Jacke</a>
  <a onclick="showCategory('Sweater')">Sweater</a>
  <a onclick="showCategory('Pullover')">Pullover</a>
  <a onclick="showCategory('Hose')">Hose</a>
  <a onclick="showCategory('Jeans')">Jeans</a>
  <a onclick="showCategory('T-Shirts')">T-Shirts</a>
  <a onclick="showCategory('Shirts')">Shirts</a>
  <a onclick="showCategory('Accessoires')">Accessoires</a>
</div>

<div class="search">
  <input id="search" placeholder="Live Suche..." oninput="liveSearch()">
</div>

<h2 id="sectionTitle">New Products</h2>
<div class="products horizontal" id="products"></div>
<div class="load-more" id="loadMore" onclick="loadMoreProducts()">⬇ Mehr anzeigen</div>

<script>
/* Mouse Glow */
const mouseGlow = document.getElementById("mouse-glow");
document.addEventListener("mousemove", e=>{
  mouseGlow.style.left=e.clientX+"px";
  mouseGlow.style.top=e.clientY+"px";
});

/* Sidebar open/close */
const sidebar = document.getElementById("sidebar");
function openMenu(){sidebar.classList.add("active");}
function closeMenu(){sidebar.classList.remove("active");}
document.addEventListener("click", e=>{
  if(!sidebar.contains(e.target) && !e.target.classList.contains('menu-btn')){closeMenu();}
});

/* Google Sheet */
const SHEET_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTKFDHf1iWbs3eMXQCWfu-DxXu8cKa-3k907m4M83DVJ3b3hMHt7co3z_w3LKwcRBkgOigcWRKZGgvC/pub?output=csv";
let allProducts=[],currentCat="",visibleCount=20;

/* Fetch CSV */
fetch(SHEET_URL)
.then(res=>res.text())
.then(csv=>{
  const rows = csv.trim().split("\n").slice(1);
  rows.forEach(row=>{
    const [name,price,image,link,category] = row.split(",");
    if(!name) return;
    allProducts.push({name,price,image,link,category,added:Date.now()});
  });
  showHome();
});

/* Render */
const container = document.getElementById("products");
function renderList(list,mode){
  if(mode==="horizontal"){
    container.className="products horizontal";
  } else {
    container.className="products grid";
  }
  container.innerHTML="";
  list.forEach(p=>{
    const isNew = Date.now()-p.added<72*60*60*1000;
    container.innerHTML+=`
      <div class="product">
        ${isNew?'<div class="new-ribbon">NEW</div>':''}
        <img src="${p.image}">
        <h3>${p.name}</h3>
        <div class="price">${p.price}€</div>
        <a class="buy-btn" href="${p.link}" target="_blank">Jetzt kaufen</a>
      </div>`;
  });
}

/* Home & Category */
/* --- Home & Category --- */
function showHome(){
  document.getElementById("sectionTitle").innerText="New Products";
  // 10 neuesten Produkte aus allen Kategorien
  const newest = allProducts.sort((a,b)=>b.added-a.added).slice(0,10);
  renderList(newest,"horizontal");
  loadMore.style.display="none";
  currentCat="";
  closeMenu();
}

function showCategory(cat){
  document.getElementById("sectionTitle").innerText=cat;
  currentCat=cat;
  visibleCount=20;
  // Filter nach Kategorie
  const filtered = allProducts.filter(p=>p.category.trim().toLowerCase() === cat.trim().toLowerCase());
  renderList(filtered.slice(0,visibleCount),"grid");
  loadMore.style.display = filtered.length>visibleCount?"block":"none";
  closeMenu();
}

/* Load More für Kategorien */
function loadMoreProducts(){
  visibleCount += 20;
  const filtered = allProducts.filter(p=>p.category.trim().toLowerCase() === currentCat.trim().toLowerCase());
  renderList(filtered.slice(0,visibleCount),"grid");
  loadMore.style.display = filtered.length>visibleCount?"none":"block";
}

/* Live Search */
function liveSearch(){
  const q = document.getElementById("search").value.toLowerCase();
  const filtered = allProducts.filter(p=>p.name.toLowerCase().includes(q) || p.category.toLowerCase().includes(q));
  renderList(filtered,"grid");
}

/* Header click */
function goHome(){showHome();}
</script>
</body>
</html>
